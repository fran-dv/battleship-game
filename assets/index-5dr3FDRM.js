(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const a of c)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function n(c){const a={};return c.integrity&&(a.integrity=c.integrity),c.referrerPolicy&&(a.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?a.credentials="include":c.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(c){if(c.ep)return;c.ep=!0;const a=n(c);fetch(c.href,a)}})();const ee={Root:"root",Messages:"game-messages"},P={LaunchGame:"launch-game",OnePlayer:"one-player",TwoPlayers:"two-players",ToggleSoundEffects:"toggle-fx",ToggleBackgroundMusic:"toggle-background-music",Cell:"cell",StartGame:"start-game"},_={empty:"empty",ship:"ship",hit:"hit",miss:"miss",sunk:"sunk"},ke=()=>{let e=_.empty;return{getState:()=>e,setState:o=>{e=o}}},ue=100,_e=(e,t="Computer")=>{const n=ue,c=K(t),a=e,p=c.getGameboard(),S=()=>n;let m=[];const u=()=>m.length===p.getSize()*p.getSize(),i=s=>s.x<0||s.x>=p.getSize()||s.y<0||s.y>=p.getSize()||m.some(d=>he(d.coords,s)),l=()=>{if(u())throw new Error("All cells have been attacked");let s={x:Math.floor(Math.random()*p.getSize()),y:Math.floor(Math.random()*p.getSize())};for(;i(s);)s={x:Math.floor(Math.random()*p.getSize()),y:Math.floor(Math.random()*p.getSize())};return s},y=s=>{const{x:d,y:f}=s,C=[];return d>0&&C.push({x:d-1,y:f}),d<p.getSize()-1&&C.push({x:d+1,y:f}),f>0&&C.push({x:d,y:f-1}),f<p.getSize()-1&&C.push({x:d,y:f+1}),C},v=s=>{const d=y(s);for(let f=0;f<d.length;f++)if(!i(d[f]))return d[f];return l()},M=s=>y(s).every(f=>i(f)),L=()=>{if(m.length===0)return l();const s=m.length-1;if(m[s].result!==_.sunk){if(m[s].result===_.hit){if(!M(m[s].coords))return v(m[s].coords)}else if(s>0&&m[s-1].result!==_.sunk&&m[s-1].result===_.hit){if(!M(m[s-1].coords))return v(m[s-1].coords)}else if(s>1&&m[s-2].result!==_.sunk&&m[s-2].result===_.hit){if(!M(m[s-2].coords))return v(m[s-2].coords)}else if(s>2&&m[s-3].result!==_.sunk&&m[s-3].result===_.hit&&!M(m[s-3].coords))return v(m[s-3].coords)}return l()};return{...c,getId:S,attackToEnemy:()=>{if(u())return new Error("All cells have been attacked");const s=L(),d=a.receiveAttack(s),f={coords:s,result:d};return m.push(f),f}}},he=(e,t)=>e.x===t.x&&e.y===t.y,we=(e,t)=>{const n=[];for(let o=0;o<e;o++){const c=Math.floor(Math.random()*t),a=Math.floor(Math.random()*t);n.push({x:c,y:a})}return n},D=(e,t)=>{setTimeout(()=>{e()},t)},ve=()=>Math.floor(Math.random()*Date.now()),ne=(e,t=null)=>{const n=t?U.gameModes.multiPlayer:U.gameModes.singlePlayer;t||(t=_e(e,"Captain Ironskulls"));let o=e,c=null;const a=()=>o===e?t:e,p=()=>{o=a()},S=()=>o.areAllShipsSunk()?(c=a(),!0):a().areAllShipsSunk()?(c=o,!0):!1,m=()=>o,u=()=>c,i=()=>n,l=h=>h.getId()===e.getId()?e.getGameboard().getRemainingShips():h.getId()===t.getId()?t.getGameboard().getRemainingShips():(console.error(`Player with id '${h.getId()}' and name '${h.getName()}' not found`),null),y=()=>{},v=(h=null,s=()=>{},d=y,f=y)=>{if(u())return console.error("Game is over"),null;const C=o===e?t:e,z=(x,r)=>{const g=S();return f(C.getGameboard().getCellState(r)),d(r,C.getId()),p(),s(),!g&&o.getId()===ue&&v(null,s,d,f),x};return n===U.gameModes.singlePlayer&&"attackToEnemy"in o?(D(()=>{const x=o.attackToEnemy();return z(x.coords,x.coords)},2e3),null):!h&&n===U.gameModes.multiPlayer?(console.error("Coordinates to attack are required in two players mode"),null):(C.receiveAttack(h),z(null,h))};return{getPlayerInTurn:m,getWinner:u,getGameMode:i,getRemainingShips:l,makeAttack:v,getPlayers:()=>[e,t],getPlayerById:h=>e.getId()===h?e:t.getId()===h?t:null}},ge="/battleship-game/assets/battleship-ship-horizontal-C1QNuRX0.png",F="/battleship-game/assets/carrier-ship-horizontal-CxzpKX5e.png",me="/battleship-game/assets/cruiser-ship-horizontal-B_evZzU-.png",pe="/battleship-game/assets/destroyer-ship-horizontal-B1rxeq7u.png",fe="/battleship-game/assets/patrol-boat-ship-horizontal-Do0UY9Yt.png",U={boardSize:10,gameModes:{singlePlayer:"single-player",multiPlayer:"multiplayer"},ships:[{size:5,name:"Carrier",imageUrl:F,type:"carrier"},{size:4,name:"Battleship",imageUrl:ge,type:"battleship"},{size:3,name:"Cruiser",imageUrl:me,type:"cruiser"},{size:3,name:"Destroyer",imageUrl:pe,type:"destroyer"},{size:2,name:"Patrol Boat",imageUrl:fe,type:"patrol-boat"}]},Ve=(e=U.boardSize)=>{const t=e,n=Array.from({length:t},()=>Array.from({length:t},()=>ke())),o=[],c=h=>{const s=o.find(d=>d.coords.some(f=>he(f,h)));return s||null},a=()=>t,p=(h,s,d)=>{const{x:f,y:C}=s;for(let z=0;z<h;z++){const x=d?f:f+z,r=d?C+z:C;if(x<0||x>=t||r<0||r>=t||n[x][r].getState()!==_.empty||c({x,y:r}))return!1}return!0},S=(h,{x:s,y:d},f,C)=>{if(!p(h.getLength(),{x:s,y:d},f))return!1;const z=[];for(let x=0;x<h.getLength();x++){const r=f?s:s+x,g=f?d+x:d;n[r][g].setState(_.ship),z.push({x:r,y:g})}return o.push({ship:h,coords:z,isVertical:f,type:C}),!0},m=({x:h,y:s})=>{const d=n[h][s],f=c({x:h,y:s});return f?(f.ship.hit(),f.ship.isSunk()?f.coords.forEach(C=>{n[C.x][C.y].setState(_.sunk)}):d.setState(_.hit),d.getState()):(d.setState(_.miss),d.getState())},u=h=>{const{x:s,y:d}=h;return n[s][d].getState()},i=()=>o.every(h=>h.ship.isSunk())||o.length===0,l=()=>{if(i())return 0;let h=0;return o.forEach(s=>{s.ship.isSunk()||h++}),h},y=h=>{const s=o.findIndex(d=>d===h);s!==-1&&o.splice(s,1)},v=({x:h,y:s})=>{const d=c({x:h,y:s});return d?(d.coords.forEach(f=>{n[f.x][f.y].setState(_.empty)}),y(d),!0):!1};return{getSize:a,isValidPlaceForShip:p,placeShip:S,getCellState:u,receiveAttack:m,getShipByCoords:c,areAllShipsSunk:i,getRemainingShips:l,removePlacedShip:v,removeAllPlacedShips:()=>{for(;o.length>0;)v(o[0].coords[0])},getAllPlacedShips:()=>o}},K=e=>{const t=e,n=Ve(),o=ve(),c=()=>o,a=()=>t,p=()=>n,S=L=>n.receiveAttack(L),m=(L,h,s,d)=>n.placeShip(L,h,s,d),u=()=>n.areAllShipsSunk(),i=()=>n.getRemainingShips();let l=!1;return U.ships.forEach(L=>{let h=!1;for(;!h;){const s=we(1,n.getSize());h=m(Ce(L.size),s[0],l,L.type)}l=!l}),{getId:c,getName:a,getGameboard:p,receiveAttack:S,placeShip:m,areAllShipsSunk:u,getRemainingShips:i,removePlacedShip:L=>{n.removePlacedShip(L)},removeAllPlacedShips:()=>{n.removeAllPlacedShips()},getAllPlacedShips:()=>n.getAllPlacedShips()}},Ce=e=>{let t=0;const n=e,o=()=>t===n;return{hit:()=>{o()||t++},getLength:()=>n,isSunk:o}},Le="/battleship-game/assets/bg-music-E42_WBg8.mp3",xe="/battleship-game/assets/press-button-Cm5nHJ4G.mp3",Be="/battleship-game/assets/hit-Cld1VUeP.mp3",He="/battleship-game/assets/miss-ZwcCI8dQ.mp3",Pe="/battleship-game/assets/sunk-BUchoFoV.mp3",Y=(e=>{const t=new Audio(Le);t.loop=!0,t.volume=.3,t.preload="auto";const n=new Audio(xe);n.preload="auto";const o={hit:Be,miss:He,sunk:Pe},c=(y,v=.5)=>{const M=new Audio(y);M.volume=v,M.preload="auto",M.play()};let a=!0;const p=()=>{t.play()},S=()=>{t.pause()},m=()=>{t.muted=!t.muted},u=()=>{a=!a},i=()=>{a&&n.play()},l=y=>{if(a)switch(y){case _.hit:c(o.hit);break;case _.miss:c(o.miss);break;case _.sunk:c(o.sunk);break}};return e.appendChild(t),e.appendChild(n),{playBackgroundMusic:p,pauseBackgroundMusic:S,toggleBackgroundMusic:m,toggleSoundEffects:u,clickOnButton:i,playCellSound:l}})(document.body),O=({classes:e,id:t,customAttrs:n}={})=>{const o=document.createElement("div");return e&&o.classList.add(...e),t&&(o.id=t),n&&n.forEach(c=>{if(/\s/.test(c.name)){console.error(`'${c.name}' is not valid. It can't contain spaces`);return}o.dataset[c.name]=c.value}),o},Me="_gameboard_m15w5_1",Ae="_cell_m15w5_27",Te="_hit_m15w5_41",Ee="_miss_m15w5_45",ze="_sunk_m15w5_49",Ie="_ship_m15w5_53",Ge="_dragging_m15w5_73",Oe="_cornerTopLeft_m15w5_79",$e="_cornerTopRight_m15w5_83",Re="_cornerBottomLeft_m15w5_87",qe="_cornerBottomRight_m15w5_91",H={gameboard:Me,cell:Ae,hit:Te,miss:Ee,sunk:ze,ship:Ie,dragging:Ge,cornerTopLeft:Oe,cornerTopRight:$e,cornerBottomLeft:Re,cornerBottomRight:qe},oe="/battleship-game/assets/carrier-ship-vertical-CqThZx2h.png",Ne="/battleship-game/assets/battleship-ship-vertical-DyPmB6Be.png",Xe="/battleship-game/assets/cruiser-ship-vertical-DX6LOmGo.png",De="/battleship-game/assets/destroyer-ship-vertical-C1F4wKhZ.png",Ue="/battleship-game/assets/patrol-boat-ship-vertical-dmowBuZM.png",Ye=(e,t)=>{let n=null;if(t)switch(e){case"carrier":n=oe;break;case"battleship":n=Ne;break;case"cruiser":n=Xe;break;case"destroyer":n=De;break;case"patrol-boat":n=Ue;break;default:n=oe}else switch(e){case"carrier":n=F;break;case"battleship":n=ge;break;case"cruiser":n=me;break;case"destroyer":n=pe;break;case"patrol-boat":n=fe;break;default:n=F}return n||(console.error(`Invalid ship type: ${e}`),n=F),n},We=(e,t,n)=>{const o=e===n.getGameboard().getSize()-1&&t===0,c=e===n.getGameboard().getSize()-1&&t===n.getGameboard().getSize()-1,a=e===0&&t===0,p=e===0&&t===n.getGameboard().getSize()-1;return o?H.cornerTopLeft:c?H.cornerTopRight:a?H.cornerBottomLeft:p?H.cornerBottomRight:null},W=(e,t,n=!1)=>{const o=O({classes:[H.gameboard]});for(let r=e.getGameboard().getSize()-1;r>=0;r--)for(let g=0;g<e.getGameboard().getSize();g++){const k=O({classes:[H.cell],customAttrs:[{name:"x",value:String(g)},{name:"y",value:String(r)},{name:"click",value:P.Cell},{name:"playerId",value:String(e.getId())}]}),b=We(r,g,e);b&&k.classList.add(b),o.appendChild(k)}t.appendChild(o);const c=({x:r,y:g})=>{const k=({x:B,y:E})=>`.${H.cell}[data-x="${B}"][data-y="${E}"]`,b=o.querySelector(k({x:r,y:g}));if(!b){console.error(`Cell {${r}, ${g}} not found`);return}const V=()=>{b.classList.remove(H.hit,H.miss,H.sunk)};V();const w=e.getGameboard().getCellState({x:r,y:g});if(w===_.hit||w===_.miss){b.classList.add(H[w]);return}if(w===_.sunk){const B=e.getGameboard().getShipByCoords({x:r,y:g});if(!B){console.error(`Ship not found at cell {${r}, ${g}}`);return}V(),B.coords.forEach(E=>{const I=o.querySelector(k(E));if(!I){console.error(`Cell {${E.x}, ${E.y}} not found`);return}I.classList.add(H[w])})}};let a=0;const p=[],S=()=>{a=o.querySelector(`.${H.cell}`).offsetWidth},m=(r,g,k,b)=>{const{x:V,y:w}=g;r.classList.add(H.ship);let B=0,E=0,I=0,N=0;b?(B=V*a,E=(e.getGameboard().getSize()-k-w)*a,I=a,N=a*k):(B=V*a,E=(e.getGameboard().getSize()-1-w)*a,I=a*k,N=a),r.style.setProperty("--translate-x",`${B}px`),r.style.setProperty("--translate-y",`${E}px`),r.style.setProperty("--width",`${I}px`),r.style.setProperty("--height",`${N}px`)},u=r=>{const g=O({classes:[H.ship]});m(g,r.coords[0],r.ship.getLength(),r.isVertical);const k=Ye(r.type,r.isVertical);return g.style.backgroundImage=`url(${k})`,g},i=()=>{S(),p.forEach(r=>{const{element:g,orientation:k,length:b,startCoords:V}=r;m(g,V,b,k==="vertical")})};let l=null,y=null;const v=r=>{if(!l)return;const{ship:g,offset:k}=l,b=e.getGameboard().getShipByCoords(g.startCoords);b&&(y={ship:b.ship,coords:b.coords,isVertical:b.isVertical,type:b.type},e.removePlacedShip(y.coords[0]));const V=o.getBoundingClientRect(),w=window.TouchEvent&&r instanceof TouchEvent?r.touches[0].clientX:r.clientX,B=window.TouchEvent&&r instanceof TouchEvent?r.touches[0].clientY:r.clientY,E=Math.round((w-V.left-k.x)/a)*a,I=Math.round((B-V.top-k.y)/a)*a;g.element.style.transform=`translate(${E}px, ${I}px)`},M=(r,g)=>{if(!l)return console.error("No ship selected"),{x:0,y:0};const k=l.ship.orientation==="vertical",b=l.ship.length,V=Math.round(r/a),w=e.getGameboard().getSize()-1-Math.round(g/a),B=k?w-b+1:w;return{x:V,y:B}},L=()=>{if(!l)return;const r=l.ship.orientation==="vertical",g=l.ship.length;let k=0,b=0;r?(k=l.ship.startCoords.x*a,b=(e.getGameboard().getSize()-g-l.ship.startCoords.y)*a):(k=l.ship.startCoords.x*a,b=(e.getGameboard().getSize()-1-l.ship.startCoords.y)*a),l.ship.element.style.transform=`translate(
      ${k}px, 
      ${b}px
    )`},h=()=>{l&&(l.ship.element.classList.remove(H.dragging),l=null,document.removeEventListener("mousemove",v),document.removeEventListener("touchmove",v))},s=()=>{if(!l)return;const r=new DOMMatrix(l.ship.element.style.transform),g=r.m41,k=r.m42,b=M(g,k),V=b.x,w=b.y,B=l.ship.orientation==="vertical",E=l.ship.length,I=B?V:V+E-1,N=B?w+E-1:w,j=e.getGameboard().getSize();if(!(V>=0&&V<j&&w>=0&&w<j&&I<j&&I>=0&&N<j&&N>=0)){e.placeShip(y.ship,y.coords[0],y.isVertical,y.type),L(),y=null,h();return}if(!y){console.error("no ship selected");return}const be=y.ship;if(!e.getGameboard().placeShip(be,{x:V,y:w},l.ship.orientation==="vertical",l.ship.type)){e.placeShip(y.ship,y.coords[0],y.isVertical,y.type),y=null,L(),h();return}l.ship.startCoords={x:V,y:w},h(),y=null},d=r=>{const g=r.currentTarget,k=p.find(B=>B.element===g);g.classList.add(H.dragging);const b=g.getBoundingClientRect(),V=(window.TouchEvent&&r instanceof TouchEvent?r.touches[0].clientX:r.clientX)-b.left,w=(window.TouchEvent&&r instanceof TouchEvent?r.touches[0].clientY:r.clientY)-b.top;l={ship:k,offset:{x:V,y:w}},document.addEventListener("mousemove",v),document.addEventListener("touchmove",v),document.addEventListener("mouseup",s),document.addEventListener("touchend",s)},f=()=>{p.forEach(r=>{const{element:g}=r;g.addEventListener("mousedown",d),g.addEventListener("touchstart",d)})};n&&setTimeout(()=>{S(),e.getAllPlacedShips().forEach(r=>{const g=u(r);g.style.zIndex="10",o.appendChild(g),p.push({element:g,type:r.type,length:r.ship.getLength(),orientation:r.isVertical?"vertical":"horizontal",startCoords:r.coords[0]})}),f()},100),new ResizeObserver(i).observe(o);const z=()=>{x(),W(e,t,!0)},x=()=>{for(;t.firstChild;)t.firstChild.remove()};return{reRenderCell:c,reRenderBoardWithShipsVisible:z,destroy:x}},je="_parent_19rkw_3",Ze="_mainBackground_19rkw_14",Fe="_container_19rkw_25",Ke="_footer_19rkw_35",Qe="_battleshipLogoSection_19rkw_39",Je="_battleshipLogo_19rkw_39",et="_homeButtonsSection_19rkw_60",tt="_homeButton_19rkw_60",G={parent:je,mainBackground:Ze,container:Fe,footer:Ke,battleshipLogoSection:Qe,battleshipLogo:Je,homeButtonsSection:et,homeButton:tt},nt="_fadeIn_1aceq_44",ot="_fadeOut_1aceq_47",R={fadeIn:nt,fadeOut:ot},st="/battleship-game/assets/logo-DVhoKWuL.png",se={onePlayer:"One player",twoPlayers:"Two players"},ye=(e,t=0)=>{const n=document.querySelector("footer");n&&n.classList.add(G.footer),document.body.classList.add(G.mainBackground);const o=O({classes:[G.container]});o.classList.add(R.fadeIn);const c=O({classes:[G.battleshipLogoSection]}),a=document.createElement("img");a.classList.add(G.battleshipLogo),a.src=st,c.appendChild(a);const p=O({classes:[G.homeButtonsSection]}),S=document.createElement("button");S.classList.add(G.homeButton),S.textContent=se.onePlayer,S.dataset.click=P.OnePlayer;const m=document.createElement("button");m.classList.add(G.homeButton),m.textContent=se.twoPlayers,m.dataset.click=P.TwoPlayers,p.appendChild(S),p.appendChild(m),o.appendChild(c),o.appendChild(p),e.appendChild(o),e.classList.add(G.parent);const u=()=>{Y.clickOnButton()},i=()=>{o.classList.remove(R.fadeIn),o.classList.add(R.fadeOut),setTimeout(()=>{e.classList.remove(G.parent),e.removeChild(o),n==null||n.classList.remove(G.footer)},t)};return Y.playBackgroundMusic(),{clickOnButton:u,destroy:i}},rt="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2022%2022'%20xmlns='http://www.w3.org/2000/svg'%20id='memory-volume-high'%3e%3cpath%20d='M13%202H15V3H16V4H17V5H18V6H19V8H20V14H19V16H18V17H17V18H16V19H15V20H13V18H14V17H15V16H16V15H17V13H18V9H17V7H16V6H15V5H14V4H13V2M14%207V8H15V10H16V12H15V14H14V15H13V7H14M2%208H6V7H7V6H8V5H9V4H10V3H11V19H10V18H9V17H8V16H7V15H6V14H2V8M4%2010V12H7V13H8V14H9V8H8V9H7V10H4Z'%20/%3e%3c/svg%3e",at="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2022%2022'%20xmlns='http://www.w3.org/2000/svg'%20id='memory-volume-mute'%3e%3cpath%20d='M12%207H14V8H15V9H17V8H18V7H20V9H19V10H18V12H19V13H20V15H18V14H17V13H15V14H14V15H12V13H13V12H14V10H13V9H12V7M6%208V7H7V6H8V5H9V4H10V3H11V19H10V18H9V17H8V16H7V15H6V14H2V8H6M7%2010H4V12H7V13H8V14H9V8H8V9H7V10Z'%20/%3e%3c/svg%3e",ct="/battleship-game/assets/fx-on-DaVELtCA.png",it="/battleship-game/assets/fx-off-Dmg_8XPC.png",lt="_parent_1czrh_3",dt="_title_1czrh_13",ut="_nextButton_1czrh_23",q={parent:lt,title:dt,nextButton:ut},ht="_playAgainButton_qodj5_1",gt={playAgainButton:ht},re=document.querySelector("footer"),mt=re||new Error("Footer element was not found"),T=(e=>{if(e instanceof Error)return console.error(e.message),null;let t=!0,n=!0;const o=e.querySelector(`img[data-click="${P.ToggleBackgroundMusic}"]`),c=e.querySelector(`img[data-click="${P.ToggleSoundEffects}"]`);return{clickOnMuteMusic:()=>{Y.toggleBackgroundMusic(),t=!t,o.src=t?rt:at},clickOnMuteFx:()=>{Y.toggleSoundEffects(),n=!n,c.src=n?ct:it},setMessage:u=>{const i=document.querySelector(`#${ee.Messages}`);if(!i){console.error("Messages display element was not found");return}i.textContent=u},showPlayAgainButton:()=>{const u=document.querySelector(`#${ee.Messages}`),i=document.createElement("button");i.classList.add(q.nextButton,gt.playAgainButton),i.textContent="Play again",i.dataset.click=P.LaunchGame,u==null||u.after(i)}}})(mt),pt="_container_yi8ww_1",ft="_launchGame_yi8ww_8",yt="_hidden_yi8ww_25",Q={container:pt,launchGame:ft,hidden:yt},St=()=>{var e;(e=document.querySelector("footer"))==null||e.classList.add(Q.hidden)},bt=()=>{var e;(e=document.querySelector("footer"))==null||e.classList.remove(Q.hidden)},ae=e=>{console.log("renderLauncherView"),St();const t=O({classes:[Q.container]}),n=document.createElement("button");n.classList.add(Q.launchGame),n.textContent="Launch game",n.dataset.click=P.LaunchGame,t.appendChild(n),e.appendChild(t);const o=()=>{e.removeChild(t),bt()};return{destroy:o,clickOnLaunchGameButton:()=>{o(),ye(e)}}},kt="_parent_4aenz_1",_t="_overlay_4aenz_17",wt="_boardContainer_4aenz_21",vt="_boardLegendsContainer_4aenz_29",Vt="_boardTitle_4aenz_37",Ct="_inTurn_4aenz_44",A={parent:kt,overlay:_t,boardContainer:wt,boardLegendsContainer:vt,boardTitle:Vt,inTurn:Ct},ce=(e,t)=>{const n=document.querySelector("footer");if(n||console.error("Footer element was not found"),!t){e.classList.remove(A.overlay),e.classList.remove(A.parent),n==null||n.classList.remove(A.overlay);return}e.classList.add(A.overlay),e.classList.add(A.parent),n==null||n.classList.add(A.overlay)},Lt=(e,t,n=0)=>{const o=[O({classes:[A.boardContainer]}),O({classes:[A.boardContainer]})],c={[t.getPlayers()[0].getId()]:W(t.getPlayers()[0],o[0]),[t.getPlayers()[1].getId()]:W(t.getPlayers()[1],o[1])},a=()=>{T==null||T.setMessage(`${t.getPlayerInTurn().getName()}'s turn!`),o.forEach(u=>{const i=u.querySelector(`.${A.boardTitle}`);i&&i.dataset.playerId===t.getPlayerInTurn().getId().toString()?i.classList.add(A.inTurn):i&&i.classList.remove(A.inTurn)})},p=()=>{o.forEach(u=>{const i=u.querySelector(`.${A.boardTitle}`);i&&i.classList.remove(A.inTurn)})};return o.forEach((u,i)=>{const l=document.createElement("div");l.classList.add(A.boardLegendsContainer);const y=document.createElement("h2");y.classList.add(A.boardTitle),y.dataset.playerId=t.getPlayers()[i].getId().toString(),y.textContent=t.getPlayers()[i].getName(),l.appendChild(y),D(()=>{u.appendChild(l),e.appendChild(u),ce(e,!0),a()},n)}),{executeAttack:u=>{var h;const i=Number(u.dataset.x),l=Number(u.dataset.y),y=Number(u.dataset.playerId);if(y===t.getPlayerInTurn().getId())return;const v=(h=t.getPlayerById(y))==null?void 0:h.getGameboard().getCellState({x:i,y:l});if(v!==_.empty&&v!==_.ship)return;const M=(s,d)=>{c[d].reRenderCell(s)},L=s=>{Y.playCellSound(s)};t.makeAttack({x:i,y:l},a,M,L),t.getWinner()&&p()},destroy:()=>{for(ce(e,!1);e.firstChild;)e.firstChild.remove()}}},ie=e=>{const t=document.createElement("h2");return t.classList.add(q.title),t.textContent=`${e.getName()} Place your ships!`,t},J=e=>{const t=document.createElement("button");return t.textContent=e,t.classList.add(q.nextButton),t},le=(e,t,n=null,o=0)=>{const c=ie(t);e.classList.add(q.parent);let a;D(()=>{e.appendChild(c),e.classList.add(R.fadeIn),a=W(t,e,!0)},o);const p=()=>{e.classList.add(R.fadeOut),D(()=>{for(e.classList.remove(q.parent,R.fadeIn,R.fadeOut);e.firstChild;)e.firstChild.remove()},o)};if(n===null)return D(()=>{const i=J("Start Game");i.classList.add(q.nextButton),i.dataset.click=P.StartGame,e.appendChild(i)},o),{destroy:p};const S=J("Next player");S.classList.add(R.fadeIn),D(()=>{e.appendChild(S)},o);const m=()=>{a.destroy(),S.remove();const i=ie(n);e.appendChild(i),W(n,e,!0);const l=J("Start Game");l.classList.add(q.nextButton),l.dataset.click=P.StartGame,e.appendChild(l)},u=()=>m();return S.addEventListener("click",u),{destroy:()=>{p(),S.removeEventListener("click",u)}}},Z=2e3,xt=e=>{let t=ae(e);const n=()=>{t.destroy(),t=ae(e)},o=()=>{t.destroy(),t=ye(e,Z)},c=(u,i)=>{t.destroy(),t=Lt(u,i,Z)},a=u=>{if(!("clickOnButton"in t)){console.error("clickOnButton not found in current view");return}t.clickOnButton(),t.destroy(),t=le(e,u.getPlayers()[0],null,Z)},p=u=>{if(!("clickOnButton"in t)){console.error("clickOnButton not found in current view");return}t.clickOnButton(),t.destroy(),t=le(e,u.getPlayers()[0],u.getPlayers()[1],Z)},S=u=>{T==null||T.setMessage(`${u.getName()} won the game!`),T==null||T.showPlayAgainButton()};return{loadLauncherView:n,loadHomeView:o,clickOnOnePlayerButton:a,clickOnTwoPlayersButton:p,loadGameSessionView:c,executeAttack:(u,i)=>{if(!("executeAttack"in t)){console.error("executeAttack not found in current view");return}if(!i.getWinner()&&(t.executeAttack(u),i.getWinner())){S(i.getWinner());return}},announceWinnerAndButton:S}},Bt="_parent_9kn28_1",Ht={parent:Bt},Se=document.getElementById(ee.Root),te=O({classes:[Ht.parent]});if(!Se)throw new Error("Main element not found");Se.appendChild(te);const X=xt(te);let $=null;const de=e=>{console.error(e),X.loadHomeView()},Pt=e=>{const t=e.target.closest("[data-click]");if(t)switch(t.dataset.click){case P.LaunchGame:X.loadHomeView();break;case P.OnePlayer:$=ne(K("Player one")),X.clickOnOnePlayerButton($);break;case P.TwoPlayers:$=ne(K("Player one"),K("Player two")),X.clickOnTwoPlayersButton($);break;case P.ToggleSoundEffects:T==null||T.clickOnMuteFx();break;case P.ToggleBackgroundMusic:T==null||T.clickOnMuteMusic();break;case P.StartGame:if(!$){de("Active game session not found");return}X.loadGameSessionView(te,$);break;case P.Cell:if(!$){de("Active game session not found");return}X.executeAttack(t,$);break}};document.body.addEventListener("click",Pt);
